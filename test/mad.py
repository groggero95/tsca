#!/usr/bin/python3
import os, sys
import gmpy2

def mm(a,b,n,nb):
	step = []
	lt = [0, ~0]
	res = 0
	mask = 1
	for i in range(nb):
		ai = (a & mask) >> i
		qi = (res + (ai&b)) & 1
		res = (res + (lt[ai]&b) + (lt[qi]&n))
#		print(res)
		res = res >> 1
		mask = mask << 1
		step.append( str(i) + ' ' +  str(ai) + ' ' + str(qi) + ' ' + str(padhex(res,128+32)))
# only used for testing pourposes
#	if res >= n:
#		return res - n
	return step


def test(nb):
	n = (1<<nb) - 1
	r = gmpy2.invert(1<<nb,n)
	for i in range(n):
		for j in range(n):
			a = mm(i,j,n,nb) % n
			b = (i*j*r) % n
			if a != b:
				print(i,j,a,b)


if __name__ == '__main__':
	test(int(sys.argv[1],10))



# ['0 0 0 0x0000000000000000000000000000000000000000',
# '1 0 0 0x0000000000000000000000000000000000000000',
# '2 1 0 0x00000000005c62ea415de6d68ee9c6789df7c98e',
# '3 1 0 0x00000000008a945f620cda41d65ea9b4ecf3ae55',
# '4 1 1 0x00000000808d909d6fb88d50585667df94ec666f',
# '5 1 1 0x00000000c08f0ebc768e66d7995246f4e8e8c27c',
# '6 1 0 0x0000000060a3ea487ca51a425b92e9f3126c2acc',
# '7 0 0 0x000000003051f5243e528d212dc974f989361566',
# '8 1 0 0x0000000018855d7c60872d6725ce80f56292d441',
# '9 0 1 0x000000008c2e9241ad97d00c71248d0731c42fd7',
# '10 0 1 0x00000000c6032ca45420215f16cf9310195cdda2',
# '11 1 0 0x00000000635df93c6b6df7861a519000aaa6385f',
# '12 0 1 0x00000000b19ae021b30b351beb66148cd5cde1e6',
# '13 0 0 0x0000000058cd7010d9859a8df5b30a466ae6f0f3',
# '14 0 1 0x00000000ac529b8bea17069fd916d1afb5ee3e30',
# '15 0 0 0x0000000056294dc5f50b834fec8b68d7daf71f18',
# '16 0 0 0x000000002b14a6e2fa85c1a7f645b46bed7b8f8c',
# '17 0 0 0x00000000158a53717d42e0d3fb22da35f6bdc7c6',
# '18 1 0 0x000000000b218ca2ffff57408c7b33939956ad71',
# '19 1 1 0x0000000085d90cbf3eb1cbcfb364acceeb1de5fd',
# '20 1 1 0x00000000c334cccd5e0b061746d9696c94018243',
# '21 0 1 0x00000000e18649ea2c59bc6481aa0142ca7b86d8',
# '22 0 0 0x0000000070c324f5162cde3240d500a1653dc36c',
# '23 0 0 0x000000003861927a8b166f19206a8050b29ee1b6',
# '24 0 0 0x000000001c30c93d458b378c90354028594f70db',
# '25 1 1 0x000000008e60ab0c6177bbf5b541b3194b1a47b2',
# '26 1 0 0x00000000478cb8707219c4d1698aa0054384ed67',
# '27 0 1 0x00000000a3b23fbbb6611bc193029c8f223d3c6a',
# '28 0 0 0x0000000051d91fdddb308de0c9814e47911e9e35',
# '29 0 1 0x00000000a8d873726aec804942fdf3b0490a14d1',
# '30 1 1 0x00000000d4b48026f42860540ea60cdd42f799ad',
# '31 0 1 0x00000000ea462396f7686982e59052fb21f6928d',
# '32 0 1 0x00000000f50ef54ef9086e1a5105760a11760efd',
# '33 0 1 0x00000000fa735e2af9d8706606c007918935cd35',
# '34 1 1 0x00000000fd81f5833b9e5862708716cde30d75df',
# '35 1 1 0x00000000ff09412f5c814c60a56a9e6c0ff94a34',
# '36 0 0 0x000000007f84a097ae40a63052b54f3607fca51a',
# '37 0 0 0x000000003fc2504bd7205318295aa79b03fe528d',
# '38 0 1 0x000000009fcd0ba968e462e4f2eaa05a0279eefd',
# '39 0 1 0x00000000cfd2695831c66acb57b29cb981b7bd35',
# '40 0 1 0x00000000e7d5182f96376ebe8a169ae94156a451',
# '41 1 1 0x00000000f432d28589cdd78eb2326079bf1de16d',
# '42 0 1 0x00000000fa054cc6423b252037567cc96009b66d',
# '43 1 1 0x00000000fd4aecd0dfcfb2bf88d25169ce776a7b',
# '44 0 1 0x00000000fe9159ebed3c12b8a2a6754167b67af4',
# '45 1 0 0x000000007fa50fe037fbf032e03d011951d30708',
# '46 0 0 0x000000003fd287f01bfdf819701e808ca8e98384',
# '47 1 0 0x000000002045a6e24f5ce2e346f906bef26c8b50',
# '48 1 0 0x00000000107f365b690c5848326649d8172e0f36',
# '49 1 0 0x00000000089bfe17f5e412faa81ceb64a98ed129',
# '50 1 1 0x0000000084964579b9a429acc13588b77339f7d9',
# '51 0 1 0x00000000c23706405a264e2f3ed810e83a17c1a3',
# '52 0 1 0x00000000e10766a3aa6760707da955009d86a688',
# '53 0 0 0x000000007083b351d533b0383ed4aa804ec35344',
# '54 1 0 0x00000000389e3c932bf7bef2ae541bb8c5597330',
# '55 1 0 0x000000001cab8133d759c64fe613d45500a48326',
# '56 0 0 0x000000000e55c099ebace327f309ea2a80524193',
# '57 1 1 0x00000000877326bab48891c366ac081a5e9bb00e',
# '58 1 0 0x000000004415f6479ba22fb8423fca85cd45a195',
# '59 0 1 0x00000000a1f6dea74b255134ff5d31cf671d9681',
# '60 0 1 0x00000000d0e752d722e6e1f35debe574340990f7',
# '61 1 1 0x00000000e8bbefd9502591291c1d05bf387757c0',
# '62 0 0 0x00000000745df7eca812c8948e0e82df9c3babe0',
# '63 0 0 0x000000003a2efbf65409644a4707416fce1dd5f0',
# '64 1 0 0x000000001d73e0e56b6298fbb26d67308506b486',
# '65 1 0 0x000000000f16535cf70f335468207a10e07b23d1',
# '66 0 1 0x0000000087770d31f8dbd303124d8994f0b8579f',
# '67 1 1 0x00000000c403cd06bb2009b0f64dd7cf96cebb14',
# '68 0 0 0x000000006201e6835d9004d87b26ebe7cb675d8a',
# '69 0 0 0x000000003100f341aec8026c3d9375f3e5b3aec5',
# '70 0 1 0x00000000986c5d2454b83a8efd07078673549d19',
# '71 1 1 0x00000000cc7e74ffe90e3d76ebaa96c8581cddd1',
# '72 0 1 0x00000000e62b1e0371db5814541297f0ac89349f',
# '73 1 1 0x00000000f35dd56f779fcc3997305efd74b72994',
# '74 0 0 0x0000000079aeeab7bbcfe61ccb982f7eba5b94ca',
# '75 0 0 0x000000003cd7755bdde7f30e65cc17bf5d2dca65',
# '76 1 1 0x000000009eb4011bada619b6a00d1ee4cd097477',
# '77 0 1 0x00000000cf45e411542746342e43dbfee6ff7ff2',
# '78 1 0 0x0000000067ff54f2eb7189f0a60bb47811778987',
# '79 0 1 0x00000000b3eb8dfcf30cfe51314326c889368a7a',
# '80 1 0 0x000000005a5229e8bae465ff278b59dce2930ecb',
# '81 0 1 0x00000000ad14f877dac66c587202f97af1c44d1c',
# '82 0 0 0x00000000568a7c3bed63362c39017cbd78e2268e',
# '83 1 0 0x000000002ba1a108380f81ecab6a84d75a68dcd5',
# '84 1 1 0x00000000961916f1dab9e125c2dc5570cba6fdaf',
# '85 1 1 0x00000000cb54d1e6ac0f10c24e953dbd84460e1c',
# '86 0 0 0x0000000065aa68f356078861274a9edec223070e',
# '87 0 0 0x0000000032d53479ab03c43093a54f6f61118387',
# '88 1 1 0x0000000099b2e0aa94340247b6f9babccefb5108',
# '89 1 0 0x000000004d35d33f8b77e7fa6a66a3d705757212',
# '90 1 0 0x0000000026f74c8a0719dad3c41d186420b28297',
# '91 1 1 0x0000000093c3ecb2c23f0d994f359f372ecbd090',
# '92 1 0 0x000000004a3e5943a27d6da336849614355db1d6',
# '93 0 0 0x00000000251f2ca1d13eb6d19b424b0a1aaed8eb',
# '94 1 1 0x0000000092d7dcbea7517b983ac8388a2bc9fbba',
# '95 0 0 0x00000000496bee5f53a8bdcc1d641c4515e4fddd',
# '96 0 1 0x00000000a4a1dab32728983eecef5aaf0b6d44a5',
# '97 1 1 0x00000000d29933c752466c4ee39ec05ca4293197',
# '98 0 1 0x00000000e9387d6726776f80500cacbad28f5e82',
# '99 1 0 0x0000000074f8a19dd4999e96b6f01cd6073f78cf',
# '100 1 1 0x00000000bac4973ca8feef7ac89f217022124bac',
# '101 1 0 0x000000005dbeae8895dd5e93f3395730af00ef64',
# '102 1 0 0x000000002f3bba2e8c4c962088867210f5784140',
# '103 1 0 0x0000000017fa4001878431e6d32cff8118b3ea2e',
# '104 1 0 0x000000000c5982eb051fffc9f88046392a51bea5',
# '105 0 1 0x000000008618a4f8ffe4393dda7d6fa915a3a509',
# '106 1 1 0x00000000c35498ea3ea43cce5a65cad9a94461c9',
# '107 1 1 0x00000000e1f292e2de043e969a59f871f314c029',
# '108 1 1 0x00000000f1418fdf2db43f7aba540f3e17fcef59',
# '109 1 1 0x00000000f8e90e5d558c3fecca511aa42a7106f1',
# '110 1 1 0x00000000fcbccd9c69784025d24fa05733ab12bd',
# '111 0 1 0x00000000fe4a4a51b210596bc7651cb81a504f15',
# '112 1 1 0x00000000ff6d6b9697ba4ce550d9a1612b9ab6cf',
# '113 1 1 0x000000007ffefc390a8f46a21593e3b5b43feaac',
# '114 0 0 0x000000003fff7e1c8547a3510ac9f1dada1ff556',
# '115 0 0 0x000000001fffbf0e42a3d1a88564f8ed6d0ffaab',
# '116 0 1 0x000000008febc30a9ea6222d20efc9033702c30c',
# '117 0 0 0x0000000047f5e1854f5311169077e4819b816186',
# '118 1 0 0x00000000245753ace9076f61d725b8b96bb87a51',
# '119 0 1 0x0000000092178d59f1d7f109c9d028e9365702df',
# '120 0 1 0x00000000c8f7aa30764031ddc32561011ba64726',
# '121 0 0 0x00000000647bd5183b2018eee192b0808dd32393',
# '122 0 1 0x00000000b229ce0f9ae445d04f06a4ccc7645780',
# '123 0 0 0x000000005914e707cd7222e82783526663b22bc0',
# '124 0 0 0x000000002c8a7383e6b9117413c1a93331d915e0',
# '125 0 0 0x00000000164539c1f35c88ba09e0d49998ec8af0',
# '126 0 0 0x000000000b229ce0f9ae445d04f06a4ccc764578',
# '127 0 0 0x0000000005914e707cd7222e82783526663b22bc']


# ['0 0 0 0x0000000000000000000000000000000000000000',
# '1 0 0 0x0000000000000000000000000000000000000000',
# '2 1 0 0x00000000005c62ea415de6d68ee9c6789df7c98e',
# '3 1 0 0x00000000008a945f620cda41d65ea9b4ecf3ae55',
# '4 1 1 0x00000000808d909d6fb88d50585667df94ec666f',
# '5 1 1 0x00000000c08f0ebc768e66d7995246f4e8e8c27c',
# '6 1 0 0x0000000060a3ea487ca51a425b92e9f3126c2acc',
# '7 0 0 0x000000003051f5243e528d212dc974f989361566',
# '8 1 0 0x0000000018855d7c60872d6725ce80f56292d441',
# '9 0 1 0x000000008c2e9241ad97d00c71248d0731c42fd7',
# '10 0 1 0x00000000c6032ca45420215f16cf9310195cdda2',
# '11 1 0 0x00000000635df93c6b6df7861a519000aaa6385f',
# '12 0 1 0x00000000b19ae021b30b351beb66148cd5cde1e6',
# '13 0 0 0x0000000058cd7010d9859a8df5b30a466ae6f0f3',
# '14 0 1 0x00000000ac529b8bea17069fd916d1afb5ee3e30',
# '15 0 0 0x0000000056294dc5f50b834fec8b68d7daf71f18',
# '16 0 0 0x000000002b14a6e2fa85c1a7f645b46bed7b8f8c',
# '17 0 0 0x00000000158a53717d42e0d3fb22da35f6bdc7c6',
# '18 1 0 0x000000000b218ca2ffff57408c7b33939956ad71',
# '19 1 1 0x0000000085d90cbf3eb1cbcfb364acceeb1de5fd',
# '20 1 1 0x00000000c334cccd5e0b061746d9696c94018243',
# '21 0 1 0x00000000e18649ea2c59bc6481aa0142ca7b86d8',
# '22 0 0 0x0000000070c324f5162cde3240d500a1653dc36c',
# '23 0 0 0x000000003861927a8b166f19206a8050b29ee1b6',
# '24 0 0 0x000000001c30c93d458b378c90354028594f70db',
# '25 1 1 0x000000008e60ab0c6177bbf5b541b3194b1a47b2',
# '26 1 0 0x00000000478cb8707219c4d1698aa0054384ed67',
# '27 0 1 0x00000000a3b23fbbb6611bc193029c8f223d3c6a',
# '28 0 0 0x0000000051d91fdddb308de0c9814e47911e9e35',
# '29 0 1 0x00000000a8d873726aec804942fdf3b0490a14d1',
# '30 1 1 0x00000000d4b48026f42860540ea60cdd42f799ad',
# '31 0 1 0x00000000ea462396f7686982e59052fb21f6928d',
# '32 0 1 0x00000000f50ef54ef9086e1a5105760a11760efd',
# '33 0 1 0x00000000fa735e2af9d8706606c007918935cd35',
# '34 1 1 0x00000000fd81f5833b9e5862708716cde30d75df',
# '35 1 1 0x00000000ff09412f5c814c60a56a9e6c0ff94a34',
# '36 0 0 0x000000007f84a097ae40a63052b54f3607fca51a',
# '37 0 0 0x000000003fc2504bd7205318295aa79b03fe528d',
# '38 0 1 0x000000009fcd0ba968e462e4f2eaa05a0279eefd',
# '39 0 1 0x00000000cfd2695831c66acb57b29cb981b7bd35',
# '40 0 1 0x00000000e7d5182f96376ebe8a169ae94156a451',
# '41 1 1 0x00000000f432d28589cdd78eb2326079bf1de16d',
# '42 0 1 0x00000000fa054cc6423b252037567cc96009b66d',
# '43 1 1 0x00000000fd4aecd0dfcfb2bf88d25169ce776a7b',
# '44 0 1 0x00000000fe9159ebed3c12b8a2a6754167b67af4',
# '45 1 0 0x000000007fa50fe037fbf032e03d011951d30708',
# '46 0 0 0x000000003fd287f01bfdf819701e808ca8e98384',
# '47 1 0 0x000000002045a6e24f5ce2e346f906bef26c8b50',
# '48 1 0 0x00000000107f365b690c5848326649d8172e0f36',
# '49 1 0 0x00000000089bfe17f5e412faa81ceb64a98ed129',
# '50 1 1 0x0000000084964579b9a429acc13588b77339f7d9',
# '51 0 1 0x00000000c23706405a264e2f3ed810e83a17c1a3',
# '52 0 1 0x00000000e10766a3aa6760707da955009d86a688',
# '53 0 0 0x000000007083b351d533b0383ed4aa804ec35344',
# '54 1 0 0x00000000389e3c932bf7bef2ae541bb8c5597330',
# '55 1 0 0x000000001cab8133d759c64fe613d45500a48326',
# '56 0 0 0x000000000e55c099ebace327f309ea2a80524193',
# '57 1 1 0x00000000877326bab48891c366ac081a5e9bb00e',
# '58 1 0 0x000000004415f6479ba22fb8423fca85cd45a195',
# '59 0 1 0x00000000a1f6dea74b255134ff5d31cf671d9681',
# '60 0 1 0x00000000d0e752d722e6e1f35debe574340990f7',
# '61 1 1 0x00000000e8bbefd9502591291c1d05bf387757c0',
# '62 0 0 0x00000000745df7eca812c8948e0e82df9c3babe0',
# '63 0 0 0x000000003a2efbf65409644a4707416fce1dd5f0',
# '64 1 0 0x000000001d73e0e56b6298fbb26d67308506b486',
# '65 1 0 0x000000000f16535cf70f335468207a10e07b23d1',
# '66 0 1 0x0000000087770d31f8dbd303124d8994f0b8579f',
# '67 1 1 0x00000000c403cd06bb2009b0f64dd7cf96cebb14',
# '68 0 0 0x000000006201e6835d9004d87b26ebe7cb675d8a',
# '69 0 0 0x000000003100f341aec8026c3d9375f3e5b3aec5',
# '70 0 1 0x00000000986c5d2454b83a8efd07078673549d19',
# '71 1 1 0x00000000cc7e74ffe90e3d76ebaa96c8581cddd1',
# '72 0 1 0x00000000e62b1e0371db5814541297f0ac89349f',
# '73 1 1 0x00000000f35dd56f779fcc3997305efd74b72994',
# '74 0 0 0x0000000079aeeab7bbcfe61ccb982f7eba5b94ca',
# '75 0 0 0x000000003cd7755bdde7f30e65cc17bf5d2dca65',
# '76 1 1 0x000000009eb4011bada619b6a00d1ee4cd097477',
# '77 0 1 0x00000000cf45e411542746342e43dbfee6ff7ff2',
# '78 1 0 0x0000000067ff54f2eb7189f0a60bb47811778987',
# '79 0 1 0x00000000b3eb8dfcf30cfe51314326c889368a7a',
# '80 1 0 0x000000005a5229e8bae465ff278b59dce2930ecb',
# '81 0 1 0x00000000ad14f877dac66c587202f97af1c44d1c',
# '82 0 0 0x00000000568a7c3bed63362c39017cbd78e2268e',
# '83 1 0 0x000000002ba1a108380f81ecab6a84d75a68dcd5',
# '84 1 1 0x00000000961916f1dab9e125c2dc5570cba6fdaf',
# '85 1 1 0x00000000cb54d1e6ac0f10c24e953dbd84460e1c',
# '86 0 0 0x0000000065aa68f356078861274a9edec223070e',
# '87 0 0 0x0000000032d53479ab03c43093a54f6f61118387',
# '88 1 1 0x0000000099b2e0aa94340247b6f9babccefb5108',
# '89 1 0 0x000000004d35d33f8b77e7fa6a66a3d705757212',
# '90 1 0 0x0000000026f74c8a0719dad3c41d186420b28297',
# '91 1 1 0x0000000093c3ecb2c23f0d994f359f372ecbd090',
# '92 1 0 0x000000004a3e5943a27d6da336849614355db1d6',
# '93 0 0 0x00000000251f2ca1d13eb6d19b424b0a1aaed8eb',
# '94 1 1 0x0000000092d7dcbea7517b983ac8388a2bc9fbba',
# '95 0 0 0x00000000496bee5f53a8bdcc1d641c4515e4fddd',
# '96 0 1 0x00000000a4a1dab32728983eecef5aaf0b6d44a5',
# '97 1 1 0x00000000d29933c752466c4ee39ec05ca4293197',
# '98 0 1 0x00000000e9387d6726776f80500cacbad28f5e82',
# '99 1 0 0x0000000074f8a19dd4999e96b6f01cd6073f78cf',
# '100 1 1 0x00000000bac4973ca8feef7ac89f217022124bac',
# '101 1 0 0x000000005dbeae8895dd5e93f3395730af00ef64',
# '102 1 0 0x000000002f3bba2e8c4c962088867210f5784140',
# '103 1 0 0x0000000017fa4001878431e6d32cff8118b3ea2e',
# '104 1 0 0x000000000c5982eb051fffc9f88046392a51bea5',
# '105 0 1 0x000000008618a4f8ffe4393dda7d6fa915a3a509',
# '106 1 1 0x00000000c35498ea3ea43cce5a65cad9a94461c9',
# '107 1 1 0x00000000e1f292e2de043e969a59f871f314c029',
# '108 1 1 0x00000000f1418fdf2db43f7aba540f3e17fcef59',
# '109 1 1 0x00000000f8e90e5d558c3fecca511aa42a7106f1',
# '110 1 1 0x00000000fcbccd9c69784025d24fa05733ab12bd',
# '111 0 1 0x00000000fe4a4a51b210596bc7651cb81a504f15',
# '112 1 1 0x00000000ff6d6b9697ba4ce550d9a1612b9ab6cf',
# '113 1 1 0x00000000fffefc390a8f46a21593e3b5b43feaac',
# '114 0 0 0x000000007fff7e1c8547a3510ac9f1dada1ff556',
# '115 0 0 0x000000003fffbf0e42a3d1a88564f8ed6d0ffaab',
# '116 0 1 0x000000009febc30a9ea6222d20efc9033702c30c',
# '117 0 0 0x000000004ff5e1854f5311169077e4819b816186',
# '118 1 0 0x00000000285753ace9076f61d725b8b96bb87a51',
# '119 0 1 0x0000000094178d59f1d7f109c9d028e9365702df',
# '120 0 1 0x00000000c9f7aa30764031ddc32561011ba64726',
# '121 0 0 0x0000000064fbd5183b2018eee192b0808dd32393',
# '122 0 1 0x00000000b269ce0f9ae445d04f06a4ccc7645780',
# '123 0 0 0x000000005934e707cd7222e82783526663b22bc0',
# '124 0 0 0x000000002c9a7383e6b9117413c1a93331d915e0',
# '125 0 0 0x00000000164d39c1f35c88ba09e0d49998ec8af0',
# '126 0 0 0x000000000b269ce0f9ae445d04f06a4ccc764578',
# '127 0 0 0x0000000005934e707cd7222e82783526663b22bc']


#113 1 1 0x000000007ffefc390a8f46a21593e3b5b43feaac
#113 1 1 0x00000000fffefc390a8f46a21593e3b5b43feaac
